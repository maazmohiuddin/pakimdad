---
layout: landing
title: Search
---

<style>
  .content table td {
    vertical-align: middle !important;
  }

  .profilepic {
    height: 50px;
    width: 50px;
    border-radius: 50%;
    border: 2px solid black;
  }

  .circle {
    line-height: 0; /* remove line-height */
    display: inline-block; /* circle wraps image */
    margin: 5px;
    border: 1px solid rgba(200, 200, 200, 0.4);
    border-radius: 50%; /* relative value */
    /*box-shadow: 0px 0px 5px rgba(0,0,0,0.4);*/
    transition: linear 0.25s;
    object-fit: cover;
    object-position: center;
    height: 50px;
    width: 50px;
  }
  .circle img {
    border-radius: 50%; /* relative value for
  		   adjustable image size */
  }
  .circle:hover {
    transition: ease-out 0.2s;
    border: 4px solid rgba(0, 0, 0, 0.2);
    -webkit-transition: ease-out 0.2s;
  }
</style>

<!DOCTYPE html>
<html lang="en">
  <body class="is-theme-core">
    <div class="<div" class="infraloader is-active"></div>

    <!-- Hero -->
    <div
      class="hero is-relative is-fullheight is-app-grey"
      data-page-theme="teal"
    >
      <!--Nav-->

      {{> navbar-fade-account}}

      <div class="hero-body">
        <div class="container">
          <div class="columns has-text-centered">
            <!-- Caption -->
            <div class="column is-8 is-offset-2 is-hero-caption is-centered">
              <h1 class="title is-1">Search Missing Person</h1>
              <h2 class="subtitle pt-10" style="margin-bottom: 33px !important">
                Search through out community contributed database
              </h2>
              <div class="buttons">
                <div class="grid-system is-medium">
                  <div class="column is-12">
                    <div class="flex-card simple-shadow">
                      <div class="card-body">
                        <div class="content">
                          <h2
                            class="no-margin title is-3"
                            style="margin-bottom: 33px !important"
                          >
                            Image Search
                          </h2>

                          <div class="columns is-vcentered pb-10">
                            <div class="column is-12">
                              <div class="section-wrapper">
                                <div
                                  class="uploader-controls has-text-right animated preFadeInUp fadeInUp"
                                >
                                  <input
                                    type="file"
                                    name="thumbnails"
                                    id="file"
                                  />
                                  <button
                                    type="submit"
                                    class="button btn-align button-cta raised no-lh is-bold secondary-btn"
                                    onclick="querysubmit()"
                                  >
                                    Upload
                                  </button>
                                </div>
                                <table class="table is-striped">
                                  <thead>
                                    <tr>
                                      <th>Name</th>

                                      <th>Age</th>

                                      <th>Image</th>
                                      <th>Actions</th>
                                    </tr>
                                  </thead>
                                  <tbody id="data"></tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                          <div id="errordiv" style="padding: 0% !important">
                            <p id="error" style="padding: 10px !important"></p>
                          </div>
                          <p class="body-color">
                            Search via Image in our database contributed by our
                            local social talent.
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Card modal triggrt -->
    <button
      hidden
      id="triggerbut"
      class="modal-trigger"
      data-modal="card-modal3"
    ></button>

    <!-- Card modal -->
    <div id="card-modal3" class="modal modal-lg">
      <div class="modal-background"></div>
      <div class="modal-card modal-content z-index-101">
        <div class="modal-card-body" id="modal-data">
          <div class="container" id="moddiv"></div>
        </div>
        <footer class="modal-card-foot">
          <button class="button raised primary-btn modal-dismiss">Close</button>
        </footer>
      </div>
    </div>

    <!-- Card counter -->
    <div id="numbers-2" class="section section-feature-grey is-medium">
      <div class="container">
        <div class="section-title-wrapper">
          <div class="bg-number">1</div>
          <h2 class="title section-title has-text-centered dark-text text-bold">
            Hover cards
          </h2>
        </div>

        <div class="content-wrapper">
          <!-- Counters -->
          <div class="columns is-vcentered has-text-centered">
            <div class="column is-3">
              <div class="card-counter">
                <div class="flex-card light-bordered hover-inset">
                  <div class="round-icon">
                    <i class="material-icons">face</i>
                  </div>
                  <div class="counter counter-number text-bold">528</div>
                  <div class="counter-text">Active users</div>
                </div>
              </div>
            </div>
            <div class="column is-3">
              <div class="card-counter">
                <div class="flex-card light-bordered hover-inset">
                  <div class="round-icon">
                    <i class="material-icons">insert_drive_file</i>
                  </div>
                  <div class="counter counter-number text-bold">150000</div>
                  <div class="counter-text">Images shared</div>
                </div>
              </div>
            </div>
            <div class="column is-3">
              <div class="card-counter">
                <div class="flex-card light-bordered hover-inset">
                  <div class="round-icon">
                    <i class="material-icons">cloud_download</i>
                  </div>
                  <div class="counter counter-number text-bold">8924</div>
                  <div class="counter-text">Total Queries</div>
                </div>
              </div>
            </div>
            <div class="column is-3">
              <div class="card-counter">
                <div class="flex-card light-bordered hover-inset">
                  <div class="round-icon">
                    <i class="material-icons">attach_file</i>
                  </div>
                  <div class="counter counter-number text-bold">993</div>
                  <div class="counter-text">Resolved Cases</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Back To Top Button -->
    <div id="backtotop"><a href="#"></a></div>

    <!-- /Chat widget -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
    <script src="assets/js/app.js"></script>
    <script src="assets/js/core.js"></script>
  </body>
</html>

<style>
  .successclass {
    color: #00ff3c;
    margin: 20px;
    padding: 10px;
    background-color: #afffc2;
    border-radius: 10px;
    border: 2px solid #7aff99;
  }

  .errorclass {
    color: #ff4570;
    margin: 20px;
    padding: 10px;
    background-color: #ffd8d8;
    border-radius: 10px;
    border: 2px solid #ff4570;

    /* background-color: #afffc2;
border-radius: 10px;
border: 2px solid #7aff99; */
  }
</style>

<div id="backtotop"><a href="#"></a></div>
<script src="assets/js/app.js"></script>
<script src="assets/js/core.js"></script>
<script>
  function querysubmit() {
    const errordiv = document.getElementById("errordiv");
    const error = document.getElementById("error");

    if (!localStorage.getItem("token")) {
      error.setAttribute("class", "error");
      errordiv.setAttribute("class", "errorclass");
      error.innerHTML = "Login first";
      return;
    }
    const file = document.getElementById("file").files;
    const payload = new FormData();
    payload.append("file", file[0]);

    const res = fetch(`https://pakimdaad.herokuapp.com/api/query/getimage`, {
      method: "POST",
      hwaders: { "Content-type": "form-data" },
      body: payload,
    })
      .then((res) => res.json())
      .then(async (data) => {
        const tableBody = document.getElementById("data");

        if (data.success) {
          const error = document.getElementById("error");
          error.setAttribute("class", "success");
          errordiv.setAttribute("class", "successclass");
          error.innerHTML = data.message;
          for (var i = 0; i < data.data.length; i++) {
            console.log(JSON.stringify(data.data[i]));

            markup = `
              <tr class="rowdata">
    <td class="mt-20">
      ${data.data[i].first_name + " " + data.data[i].last_name}
    </td>
    <td class="mt-20">${data.data[i].age}</td>
    <td>
      <img src="https://pakimdaad.herokuapp.com/api/query/image/${
        data.data[i].images
      }" class="circle">
    </td>
    <td>

      <button class="button is-small btn-align accent-btn raised rounded btn-outlined" onclick='datamap({
        "name": "${data.data[i].first_name} ${data.data[i].last_name}",
        "age": "${data.data[i].age}",
        "gender": "${data.data[i].gender}",
        "lastloc": "${data.data[i].lastLocation}",
        "datetime": "${data.data[i].dateTime}",
        "plantiff": "${data.data[i].plaintiff}",
        "email": "${data.data[i].email}",
        "contact": "${data.data[i].contact}",
        "altcontact": "${data.data[i].altContact}",
        "address": "${data.data[i].address}",
        "info": "${data.data[i].info}",
        "images": "${data.data[i].images}"
      })'>
        View More
      </button>
    </td>
  </tr>

      `;

            tableBody.insertAdjacentHTML("afterend", markup);
          }
        } else {
          const error = document.getElementById("error");
          error.setAttribute("class", "error");
          errordiv.setAttribute("class", "errorclass");
          error.innerHTML = data.message;
          console.log(data.message);
          markup = "";
          tableBody.insertAdjacentHTML("afterend", markup);
        }
      });
  }
  async function datamap(body) {
    await console.log(body);
    // body = JSON.parse(body);
    console.log(body.name);

    const datamodal = document.getElementById("moddiv");
    const fname = document.getElementById("fname");
    targetbutton = document.getElementById("triggerbut");
    targetbutton.click();

    let dataDiv = document.getElementById("moddiv");
    dataDiv.setAttribute("class", "data-div");

    dataDiv.innerHTML = `
        <p><strong>Name:</strong> ${body.name}</p>
        <p><strong>Age:</strong> ${body.age}</p>
        <p><strong>Gender:</strong> ${body.gender}</p>
        <p><strong>Last Location:</strong> ${body.lastloc}</p>
        <p><strong>Date/Time:</strong> ${body.datetime}</p>
        <p><strong>Plaintiff:</strong> ${body.plantiff}</p>
        <p><strong>Email:</strong> ${body.email}</p>
        <p><strong>Contact:</strong> ${body.contact}</p>
        <p><strong>Alt. Contact:</strong> ${body.altcontact}</p>
        <p><strong>Address:</strong> ${body.address}</p>
        <p><strong>Info:</strong> ${body.info}</p>
        <p><strong>Image:</strong> <img src="https://pakimdaad.herokuapp.com/api/query/image/${body.images}" class="modal-image"></p>
    `;
    datamodal.appendChild(dataDiv);
  }
</script>

{{> footer-side-light}}
