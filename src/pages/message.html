---
layout: default
title: Name Search
---

{{> navbar-fade-account}}

<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required Meta Tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />

    <title>Pak-Imdaad</title>
    <link rel="icon" type="image/png" href="assets/img/favicon.png" />

    <!--Core CSS -->
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />
    <!-- <link rel="stylesheet" href="assets/css/app.css" />
    <link rel="stylesheet" href="assets/css/core.css" /> -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</head>
<style>
    article,
    aside,
    details,
    figcaption,
    figure,
    footer,
    header,
    hgroup,
    menu,
    nav,
    section {
        display: block;
    }

    body {
        line-height: 1.5;
    }

    ol,
    ul {
        list-style: none;
    }

    blockquote,
    q {
        quotes: none;
    }

    blockquote:before,
    blockquote:after,
    q:before,
    q:after {
        content: "";
        content: none;
    }

    table {
        border-collapse: collapse;
        border-spacing: 0;
    }

    .message-area {
        height: 100vh;
        overflow: hidden;
        padding: 30px 0;
        background: #f5f5f5;
    }

    .chat-area {
        position: relative;
        width: 100%;
        background-color: #fff;
        border-radius: 0.3rem;
        height: 90vh;
        overflow: hidden;
        min-height: calc(100% - 1rem);
    }

    .chatlist {
        outline: 0;
        height: 100%;
        overflow: hidden;
        width: 300px;
        float: left;
        padding: 15px;
    }

    .chat-area .modal-content {
        border: none;
        border-radius: 0;
        outline: 0;
        height: 100%;
    }

    .chat-area .modal-dialog-scrollable {
        height: 100% !important;
    }

    .chatbox {
        width: auto;
        overflow: hidden;
        height: 100%;
        border-left: 1px solid #ccc;
    }

    .chatbox .modal-dialog,
    .chatlist .modal-dialog {
        max-width: 100%;
        margin: 0;
    }

    .msg-search {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .chat-area .form-control {
        display: block;
        width: 80%;
        padding: 0.375rem 0.75rem;
        font-size: 14px;
        font-weight: 400;
        line-height: 1.5;
        color: #222;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ccc;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        border-radius: 0.25rem;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    .chat-area .form-control:focus {
        outline: 0;
        box-shadow: inherit;
    }

    a.add img {
        height: 36px;
    }

    .chat-area .nav-tabs {
        border-bottom: 1px solid #dee2e6;
        align-items: center;
        justify-content: space-between;
        flex-wrap: inherit;
    }

    .chat-area .nav-tabs .nav-item {
        width: 100%;
    }

    .chat-area .nav-tabs .nav-link {
        width: 100%;
        color: #180660;
        font-size: 14px;
        font-weight: 500;
        line-height: 1.5;
        text-transform: capitalize;
        margin-top: 5px;
        margin-bottom: -1px;
        background: 0 0;
        border: 1px solid transparent;
        border-top-left-radius: 0.25rem;
        border-top-right-radius: 0.25rem;
    }

    .chat-area .nav-tabs .nav-item.show .nav-link,
    .chat-area .nav-tabs .nav-link.active {
        color: #222;
        background-color: #fff;
        border-color: transparent transparent #000;
    }

    .chat-area .nav-tabs .nav-link:focus,
    .chat-area .nav-tabs .nav-link:hover {
        border-color: transparent transparent #000;
        isolation: isolate;
    }

    .chat-list h3 {
        color: #222;
        font-size: 16px;
        font-weight: 500;
        line-height: 1.5;
        text-transform: capitalize;
        margin-bottom: 0;
    }

    .chat-list p {
        color: #343434;
        font-size: 14px;
        font-weight: 400;
        line-height: 1.5;
        text-transform: capitalize;
        margin-bottom: 0;
    }

    .chat-list a.d-flex {
        margin-bottom: 15px;
        position: relative;
        text-decoration: none;
    }

    .chat-list .active {
        display: block;
        content: "";
        clear: both;
        position: absolute;
        bottom: 3px;
        left: 34px;
        height: 12px;
        width: 12px;
        background: #00db75;
        border-radius: 50%;
        border: 2px solid #fff;
    }

    .msg-head h3 {
        color: #222;
        font-size: 18px;
        font-weight: 600;
        line-height: 1.5;
        margin-bottom: 0;
    }

    .msg-head p {
        color: #343434;
        font-size: 14px;
        font-weight: 400;
        line-height: 1.5;
        text-transform: capitalize;
        margin-bottom: 0;
    }

    .msg-head {
        padding: 15px;
        border-bottom: 1px solid #ccc;
    }

    .moreoption {
        display: flex;
        align-items: center;
        justify-content: end;
    }

    .moreoption .navbar {
        padding: 0;
    }

    .moreoption li .nav-link {
        color: #222;
        font-size: 16px;
    }

    .moreoption .dropdown-toggle::after {
        display: none;
    }

    .moreoption .dropdown-menu[data-bs-popper] {
        top: 100%;
        left: auto;
        right: 0;
        margin-top: 0.125rem;
    }

    .msg-body ul {
        overflow: hidden;
    }

    .msg-body ul li {
        list-style: none;
        margin: 15px 0;
    }

    .msg-body ul li.sender {
        display: block;
        width: 100%;
        position: relative;
    }

    .msg-body ul li.sender:before {
        display: block;
        clear: both;
        content: "";
        position: absolute;
        top: -6px;
        left: -7px;
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 0 12px 15px 12px;
        border-color: transparent transparent #f5f5f5 transparent;
        -webkit-transform: rotate(-37deg);
        -ms-transform: rotate(-37deg);
        transform: rotate(-37deg);
    }

    .msg-body ul li.sender p {
        color: #000;
        font-size: 14px;
        line-height: 1.5;
        font-weight: 400;
        padding: 15px;
        background: #f5f5f5;
        display: inline-block;
        border-bottom-left-radius: 10px;
        border-top-right-radius: 10px;
        border-bottom-right-radius: 10px;
        margin-bottom: 0;
    }

    .msg-body ul li.sender p b {
        display: block;
        color: #180660;
        font-size: 14px;
        line-height: 1.5;
        font-weight: 500;
    }

    .msg-body ul li.repaly {
        display: block;
        width: 100%;
        text-align: right;
        position: relative;
    }

    .msg-body ul li.repaly:before {
        display: block;
        clear: both;
        content: "";
        position: absolute;
        bottom: 15px;
        right: -7px;
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 0 12px 15px 12px;
        border-color: transparent transparent #4b7bec transparent;
        -webkit-transform: rotate(37deg);
        -ms-transform: rotate(37deg);
        transform: rotate(37deg);
    }

    .msg-body ul li.repaly p {
        color: #fff;
        font-size: 14px;
        line-height: 1.5;
        font-weight: 400;
        padding: 15px;
        background: #4b7bec;
        display: inline-block;
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
        border-bottom-left-radius: 10px;
        margin-bottom: 0;
    }

    .msg-body ul li.repaly p b {
        display: block;
        color: #061061;
        font-size: 14px;
        line-height: 1.5;
        font-weight: 500;
    }

    .msg-body ul li.repaly:after {
        display: block;
        content: "";
        clear: both;
    }

    .time {
        display: block;
        color: #000;
        font-size: 12px;
        line-height: 1.5;
        font-weight: 400;
    }

    li.repaly .time {
        margin-right: 20px;
    }

    .divider {
        position: relative;
        z-index: 1;
        text-align: center;
    }

    .msg-body h6 {
        text-align: center;
        font-weight: normal;
        font-size: 14px;
        line-height: 1.5;
        color: #222;
        background: #fff;
        display: inline-block;
        padding: 0 5px;
        margin-bottom: 0;
    }

    .divider:after {
        display: block;
        content: "";
        clear: both;
        position: absolute;
        top: 12px;
        left: 0;
        border-top: 1px solid #ebebeb;
        width: 100%;
        height: 100%;
        z-index: -1;
    }

    .send-box {
        padding: 15px;
        border-top: 1px solid #ccc;
    }

    .send-box form {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 15px;
    }

    .send-box .form-control {
        display: block;
        width: 85%;
        padding: 0.375rem 0.75rem;
        font-size: 14px;
        font-weight: 400;
        line-height: 1.5;
        color: #222;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ccc;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        border-radius: 0.25rem;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    .send-box button {
        border: none;
        background: #3867d6;
        padding: 0.375rem 5px;
        color: #fff;
        border-radius: 0.25rem;
        font-size: 14px;
        font-weight: 400;
        width: 24%;
        margin-left: 1%;
    }

    .send-box button i {
        margin-right: 5px;
    }

    .send-btns .button-wrapper {
        position: relative;
        width: 125px;
        height: auto;
        text-align: left;
        margin: 0 auto;
        display: block;
        background: #f6f7fa;
        border-radius: 3px;
        padding: 5px 15px;
        float: left;
        margin-right: 5px;
        margin-bottom: 5px;
        overflow: hidden;
    }

    .send-btns .button-wrapper span.label {
        position: relative;
        z-index: 1;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        width: 100%;
        cursor: pointer;
        color: #343945;
        font-weight: 400;
        text-transform: capitalize;
        font-size: 13px;
    }

    #upload {
        display: inline-block;
        position: absolute;
        z-index: 1;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        opacity: 0;
        cursor: pointer;
    }

    .send-btns .attach .form-control {
        display: inline-block;
        width: 120px;
        height: auto;
        padding: 5px 8px;
        font-size: 13px;
        font-weight: 400;
        line-height: 1.5;
        color: #343945;
        background-color: #f6f7fa;
        background-clip: padding-box;
        border: 1px solid #f6f7fa;
        border-radius: 3px;
        margin-bottom: 5px;
    }

    .send-btns .button-wrapper span.label img {
        margin-right: 5px;
    }

    .button-wrapper {
        position: relative;
        width: 100px;
        height: 100px;
        text-align: center;
        margin: 0 auto;
    }

    button:focus {
        outline: 0;
    }

    .add-apoint {
        display: inline-block;
        margin-left: 5px;
    }

    .add-apoint a {
        text-decoration: none;
        background: #f6f7fa;
        border-radius: 8px;
        padding: 8px 8px;
        font-size: 13px;
        font-weight: 400;
        line-height: 1.2;
        color: #343945;
    }

    .add-apoint a svg {
        margin-right: 5px;
    }

    .chat-icon {
        display: none;
    }

    .closess i {
        display: none;
    }
.dp{
    display: block;
    width: 40px;
    min-width: 40px;
    height: 40px;
    min-height: 40px;
    border-radius: 50%;
}
    @media (max-width: 767px) {
        .chat-icon {
            display: block;
            margin-right: 5px;
        }

        .chatlist {
            width: 100%;
        }

        .chatbox {
            width: 100%;
            position: absolute;
            left: 1000px;
            right: 0;
            background: #fff;
            transition: all 0.5s ease;
            border-left: none;
        }

        .showbox {
            left: 0 !important;
            transition: all 0.5s ease;
        }

        .msg-head h3 {
            font-size: 14px;
        }

        .msg-head p {
            font-size: 12px;
        }

        .msg-head .flex-shrink-0 img {
            height: 30px;
        }

        .send-box button {
            width: 28%;
        }

        .send-box .form-control {
            width: 70%;
        }

        .chat-list h3 {
            font-size: 14px;
        }

        .chat-list p {
            font-size: 12px;
        }

        .msg-body ul li.sender p {
            font-size: 13px;
            padding: 8px;
            border-bottom-left-radius: 6px;
            border-top-right-radius: 6px;
            border-bottom-right-radius: 6px;
        }

        .msg-body ul li.repaly p {
            font-size: 13px;
            padding: 8px;
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
            border-bottom-left-radius: 6px;
        }
    }
</style>

<body>
    <div class="pageloader"></div>
    <div class="infraloader is-active"></div>
    <!DOCTYPE html>
    <html lang="en">

    <body class="is-theme-core">
        <div class="<div" class="infraloader is-active"></div>

        <!-- Hero -->
        <!--Nav-->
        <section class="message-area">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="chat-area">
                            <!-- chatlist -->
                            <div class="chatlist">
                                <div class="modal-dialog-scrollable">
                                    <div class="modal-content">

                                        <!-- <div class="chat-header">
                            <div class="msg-search">
                              <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Search" aria-label="search">
                              <a class="add" href="#"><img class="img-fluid" src="https://mehedihtml.com/chatbox/assets/img/add.svg" alt="add"></a>
                            </div>
          
                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                              <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="Open-tab" data-bs-toggle="tab" data-bs-target="#Open" type="button" role="tab" aria-controls="Open" aria-selected="true">Open</button>
                              </li>
                              <li class="nav-item" role="presentation">
                                <button class="nav-link" id="Closed-tab" data-bs-toggle="tab" data-bs-target="#Closed" type="button" role="tab" aria-controls="Closed" aria-selected="false">Closed</button>
                              </li>
                            </ul>
                          </div> -->

                                        <div class="modal-body">
                                            <!-- chat-list -->
                                            <div class="chat-lists">
                                                <div class="tab-content" id="myTabContent">
                                                    <div class="tab-pane fade show active" id="Open" role="tabpanel"
                                                        aria-labelledby="Open-tab">
                                                        <!-- chat-list -->
                                                        <div class="chat-list" id="chat">

                                                        </div>
                                                        <!-- chat-list -->
                                                    </div>
                                                    
                                                </div>

                                            </div>
                                            <!-- chat-list -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- chatlist -->

                            <!-- chatbox -->
                            <div class="chatbox">
                                <div class="modal-dialog-scrollable">
                                    <div class="modal-content">
                                        <div class="msg-head">
                                            <div class="row">
                                                <div class="col-8">
                                                    <div class="d-flex align-items-center">
                                                        <span class="chat-icon"> <img
                                                            class="avatar dp"
                                                            src="https://via.placeholder.com/250x250"
                                                            alt=""
                                                            data-demo-src="assets/img/avatars/helen.jpg"
                                                          /></span>
                                                        <div class="flex-shrink-0">
                                                            <img
                                                            class="avatar dp"
                                                            src="https://via.placeholder.com/250x250"
                                                            alt=""
                                                            data-demo-src="assets/img/avatars/helen.jpg"
                                                          />
                                                        </div>
                                                        <div class="flex-grow-1 ms-3">
                                                            <h3 id="sendername"></h3>
                                                            
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <div class="col-4">
                                                    <ul class="moreoption">
                                                        <li class="navbar nav-item dropdown">
                                                            <a class="nav-link dropdown-toggle" href="#" role="button"
                                                                data-bs-toggle="dropdown" aria-expanded="false"><i
                                                                    class="fa fa-ellipsis-v" aria-hidden="true"></i></a>
                                                            <ul class="dropdown-menu">
                                                                <li><a class="dropdown-item" href="#">Action</a></li>
                                                                <li><a class="dropdown-item" href="#">Another action</a>
                                                                </li>
                                                                <li>
                                                                    <hr class="dropdown-divider">
                                                                </li>
                                                                <li><a class="dropdown-item" href="#">Something else
                                                                        here</a></li>
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                </div> -->
                                            </div>
                                        </div>

                                        <div class="modal-body">
                                            <div class="msg-body" id="msgbody">
                                                
                                            </div>
                                        </div>

                                        <div class="send-box">
                                            <form action="">
                                                <input type="text" class="form-control" aria-label="message…"
                                                    placeholder="Write message…" id="messagetext">

                                                <button type="button" onclick="sendmessage()"><i class="fa fa-paper-plane"
                                                        aria-hidden="true"></i> Send</button>
                                            </form>

                                            <!-- <div class="send-btns">
                                                <div class="attach">
                                                    <div class="button-wrapper">
                                                        <span class="label">
                                                            <img class="img-fluid"
                                                                src="https://mehedihtml.com/chatbox/assets/img/upload.svg"
                                                                alt="image title"> attached file
                                                        </span><input type="file" name="upload" id="upload"
                                                            class="upload-box" placeholder="Upload File"
                                                            aria-label="Upload File">
                                                    </div>

                                                    <select class="form-control" id="exampleFormControlSelect1">
                                                        <option>Select template</option>
                                                        <option>Template 1</option>
                                                        <option>Template 2</option>
                                                    </select>

                                                    <div class="add-apoint">
                                                        <a href="#" data-toggle="modal"
                                                            data-target="#exampleModal4"><svg
                                                                xmlns="http://www.w3.org/2000/svg" width="16"
                                                                height="16" viewbox="0 0 16 16" fill="none">
                                                                <path
                                                                    d="M8 16C3.58862 16 0 12.4114 0 8C0 3.58862 3.58862 0 8 0C12.4114 0 16 3.58862 16 8C16 12.4114 12.4114 16 8 16ZM8 1C4.14001 1 1 4.14001 1 8C1 11.86 4.14001 15 8 15C11.86 15 15 11.86 15 8C15 4.14001 11.86 1 8 1Z"
                                                                    fill="#7D7D7D" />
                                                                <path
                                                                    d="M11.5 8.5H4.5C4.224 8.5 4 8.276 4 8C4 7.724 4.224 7.5 4.5 7.5H11.5C11.776 7.5 12 7.724 12 8C12 8.276 11.776 8.5 11.5 8.5Z"
                                                                    fill="#7D7D7D" />
                                                                <path
                                                                    d="M8 12C7.724 12 7.5 11.776 7.5 11.5V4.5C7.5 4.224 7.724 4 8 4C8.276 4 8.5 4.224 8.5 4.5V11.5C8.5 11.776 8.276 12 8 12Z"
                                                                    fill="#7D7D7D" />
                                                            </svg> Appoinment</a>
                                                    </div>
                                                </div>
                                            </div> -->

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- chatbox -->

                    </div>
                </div>
            </div>
            </div>
        </section>
        <!-- <div class="columns is-vcentered pt-30">
            <div class="column is-10 is-offset-1">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Username</th>
                            <th>Email</th>
                            <th>Age</th>
                            <th>Contact</th>
                            <th>Image</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="data">

                    </tbody>
                </table>
            </div>
        </div> -->
        <!-- Card counter -->
        <div id="numbers-2" class="section section-feature-grey is-medium">
            <div class="container">
                <div class="section-title-wrapper">
                    <div class="bg-number">1</div>
                    <h2 class="title section-title has-text-centered dark-text text-bold">
                        Hover cards
                    </h2>
                </div>

                <div class="content-wrapper">
                    <!-- Counters -->
                    <div class="columns is-vcentered has-text-centered">
                        <div class="column is-3">
                            <div class="card-counter">
                                <div class="flex-card light-bordered hover-inset">
                                    <div class="round-icon">
                                        <i class="material-icons">face</i>
                                    </div>
                                    <div class="counter counter-number text-bold">528</div>
                                    <div class="counter-text">Active users</div>
                                </div>
                            </div>
                        </div>
                        <div class="column is-3">
                            <div class="card-counter">
                                <div class="flex-card light-bordered hover-inset">
                                    <div class="round-icon">
                                        <i class="material-icons">insert_drive_file</i>
                                    </div>
                                    <div class="counter counter-number text-bold">150000</div>
                                    <div class="counter-text">Files shared</div>
                                </div>
                            </div>
                        </div>
                        <div class="column is-3">
                            <div class="card-counter">
                                <div class="flex-card light-bordered hover-inset">
                                    <div class="round-icon">
                                        <i class="material-icons">cloud_download</i>
                                    </div>
                                    <div class="counter counter-number text-bold">8924</div>
                                    <div class="counter-text">Product downloads</div>
                                </div>
                            </div>
                        </div>
                        <div class="column is-3">
                            <div class="card-counter">
                                <div class="flex-card light-bordered hover-inset">
                                    <div class="round-icon">
                                        <i class="material-icons">attach_file</i>
                                    </div>
                                    <div class="counter counter-number text-bold">993</div>
                                    <div class="counter-text">Attachments uploaded</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <button hidden id="triggerbut" class="modal-trigger" data-modal="card-modal3"></button>

        <!-- Card modal -->
        <div id="card-modal3" class="modal modal-lg">
            <div class="modal-background"></div>
            <div class="modal-card modal-content z-index-101">
                <div class="modal-card-body" id="modal-data">
                    <div class="container" id="moddiv"></div>
                </div>
                <footer class="modal-card-foot">
                    <button class="button raised primary-btn modal-dismiss">
                        Close
                    </button>
                </footer>
            </div>
        </div>

        {{> footer-side-light}}

        <!-- Back To Top Button -->
        <div id="backtotop"><a href="#"></a></div>

        <!-- /Chat widget -->
        <script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
        <script src="assets/js/app.js"></script>
        <script src="assets/js/core.js"></script>
    </body>

    </html>

    <!-- Back To Top Button -->
    <div id="backtotop"><a href="#"></a></div>
    <script src="assets/js/app.js"></script>
    <script src="assets/js/core.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</body>
<script>
    getconversation()
    function getconversation() {
        const res = fetch(
            `http://localhost:5000/api/conversation`,
            {
                method: "GET",
                headers: {
                    authorization: `Bearer ${localStorage.getItem("token")}`,
                },
            }
        ).then((res) => res.json()).then((data) => {
                const chatlist = document.getElementById("chat")
                const receiverId= localStorage.getItem("receiverId")

                const user = JSON.parse(localStorage.getItem("user"))._id;
                
                let chatfind= false
                data.data.map((item,i) => {
                    
                    const a = document.createElement('a')
                    

                    if(receiverId){
                        console.log(receiverId)

                    if(item.members[0]._id.toString()==receiverId.toString() ||item.members[1]._id.toString()==receiverId.toString() ){
                        console.log(receiverId)
chatfind = true
                        if (item.members[0]._id == user) {
                            console.log(item.members[1].first_name,"3")
                            getmessages({
                                "name": `${item.members[1].first_name} ${item.members[1].last_name}`,
                                "id": `${item._id}` })
                        }else{
                            console.log(item.members[0].first_name,"3")

                            getmessages({
                                "name": `${item.members[0].first_name} ${item.members[0].last_name}`,
                                "id": `${item._id}` })

                        }
                    }}
                    if (item.members[0]._id == user) {
                     

                        a.innerHTML = `
      <a class="d-flex align-items-center" href="#" onclick='getmessages({
        "name": "${item.members[1].first_name} ${item.members[1].last_name}",
        "id": "${item._id}"})'>
      <div class="flex-shrink-0">
        <img
        class="avatar dp"
        src="https://via.placeholder.com/250x250"
        alt=""
        data-demo-src="assets/img/avatars/helen.jpg"
      />
          
        </div>
        <div class="flex-grow-1 ms-3">
          <h3>${item.members[1].first_name +" "+ item.members[1].last_name}</h3>
          
        </div></a>`
                    } else {
                       
                        a.innerHTML = `
    <a class="d-flex align-items-center" href="#" onclick='getmessages({
        "name": "${item.members[0].first_name} ${item.members[0].last_name}",
        "id": "${item._id}"})'>
    <div class="flex-shrink-0">
        <img
        class="avatar dp"
        src="https://via.placeholder.com/250x250"
        alt=""
        data-demo-src="assets/img/avatars/helen.jpg"
      />
        
      </div>
      <div class="flex-grow-1 ms-3">
        <h3>${item.members[0].first_name +" "+ item.members[0].last_name}</h3>
        
      </div></a>`

                    }
                    chatlist.appendChild(a)

if(!data.data[i+1]){
    if(!chatfind){
        if (data.data[0].members[0]._id == user) {
console.log(data.data[0].members[1].first_name,"1")
            getmessages({
                "name": `${data.data[0].members[1].first_name} ${data.data[0].members[1].last_name}`,
                "id": `${data.data[0]._id}` })
        }else{
            console.log(data.data[0].members[0].first_name,"2")
            getmessages({
                "name": `${data.data[0].members[0].first_name} ${data.data[0].members[0].last_name}`,
                "id": `${data.data[0]._id}` })

        }
    }
}

                    
                })
            })
    }
    
    function getmessages(data){
        
        localStorage.setItem("receiverId","")
        localStorage.setItem("conversation",JSON.stringify(data.id))
        localStorage.setItem("name",JSON.stringify(data.name))
        
        const sendname = document.getElementById("sendername")
        sendname.innerHTML=data.name

        const res = fetch(
            `http://localhost:5000/api/messages/${data.id}`,
            {
                method: "GET",
                headers: {
                    authorization: `Bearer ${localStorage.getItem("token")}`,
                },
            }
        )
            .then((res) => res.json())
            .then((data) => {
if(data.success){


    const sendbox = document.getElementById("msgbody")
    sendbox.innerHTML = ""
    const ul = document.createElement("ul")
    const user = JSON.parse(localStorage.getItem("user"))._id;
if(data.data.length==0){
    
sendbox.appendChild(`<p>No Chats available<p>`)

}else{

    data.data.map((item)=>{
        let date = new Date(item.createdAt)
        
        date = date.toString().split(" ")[4]
        if(item.sender._id==user){
    ul.innerHTML+=`<li class="repaly">
    <p>${item.text}</p>
    <span class="time">${date}</span>
    
    </li>`}else{
        ul.innerHTML+=`<li class="sender">
            <p>${item.text}</p>
    <span class="time">${date}</span>
        </li>`
    }
    })
    sendbox.appendChild(ul)
    }
}
})
    }
 async function sendmessage(){
    const sender = JSON.parse(localStorage.getItem("user"))._id
    let text = document.getElementById("messagetext").value
    const conversationId = JSON.parse(localStorage.getItem("conversation"))
    const response = await fetch(
        `http://localhost:5000/api/messages`,
        {
          method: "POST", // *GET, POST, PUT, DELETE, etc.
          headers: {
            "Content-Type": "application/json",
            // 'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: JSON.stringify({
       sender,text,conversationId     
          }), // body data type must match "Content-Type" header
        }
      )
        .then((res) => res.json())
        .then((data) => {
            if(data.success){
    getmessages({id:JSON.parse(localStorage.getItem("conversation")),name:JSON.parse(localStorage.getItem("name"))})

    document.getElementById("messagetext").value="" 

            }

        })
 }
    jQuery(document).ready(function () {
        $(".chat-list a").click(function () {
            $(".chatbox").addClass("showbox");
            return false;
        });

        $(".chat-icon").click(function () {
            $(".chatbox").removeClass("showbox");
        });
    });

</script>

</html>